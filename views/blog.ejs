<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include("./partials/head") %>
    <title>Blog List Page</title>
  </head>
  <body>
    <%- include("./partials/navbar") %>

    <div class="container mt-4">
      <h1><%= blog.title %></h1>
      <img src="<%= blog.coverImageUrl %>" width="600px" alt="blog image" />
      <p><%= blog.body %></p>
    </div>
    <div class="container mt-4 d-flex gap-3 flex-row align-items-center">
      <img
        src="<%= blog.createdBy.profileImageUrl %>"
        alt="user profile img"
        width="80px"
      />
      <h3><%= blog.createdBy.fullName %></h3>
    </div>
</br>
    <div class="container mt-4 d-flex gap-1 flex-column">
      <h2>Comments</h2>
      <% if(locals.user){ %>
      <form action="/blog/comment/<%= blog._id %>" method="POST" class="form-group mt-3">
        <div class="mb-3 col-sm-6">
          <input
            type="text"
            placeholder="Comment text"
            class="form-control"
            name="content"
          />
        </div>

        <button type="submit" class="btn btn-success">Add Comment</button>
      </form>
       <% } %>
    </div>

    <div class="container mt-3"> <% comments.forEach((comment)=>{ %>
        <div class="mb-2 card p-3 d-flex flex-row gap-2 justify-content-start align-items-center" style="max-width: 30rem">
          <img
            style="width: 40px; height: 40px;"
            class="card-img-top"
            src="<%= comment.createdBy.profileImageUrl %>"
            alt="comment
        image"
          />
          <div>
            <h4 ><%= comment.createdBy.fullName %></h4>
          <h5 class="text-secondary"><%= comment.content %></h5></div>
          </div> 
      </div>
      <% }) %></div>
    <%- include("./partials/script") %>
  </body>
</html>
